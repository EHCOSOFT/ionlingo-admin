<!DOCTYPE html>
<html lang="en" data-bs-theme="light" data-layout="fluid" data-sidebar-theme="light" data-sidebar-position="left"
    data-sidebar-behavior="sticky">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <link rel="stylesheet" href="css/custom.css">
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-content js-simplebar">
                <a class="sidebar-brand" href="대시보드.html">
                    <img src="img/logo.svg" alt="아이오엔링고">
                </a>

                <ul class="sidebar-nav">
                    <li class="sidebar-item">
                        <a class="sidebar-link" href="대시보드.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="home" class="lucide lucide-layout align-middle">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>
                            <span class="align-middle">Dashboard</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#engine-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="power" class="lucide lucide-layout align-middle">
                                <path d="M12 2v10"></path>
                                <path d="M18.4 6.6a9 9 0 1 1-12.77.04"></path>
                            </svg>
                            <span class="align-middle">엔진관리</span>
                        </a>
                        <ul id="engine-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="엔진관리_엔진모니터링.html">엔진 모니터링</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#model-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="cloud" class="lucide lucide-layout align-middle">
                                <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
                            </svg>
                            <span class="align-middle">모델관리</span>
                        </a>
                        <ul id="model-manage" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="모델관리_모델설정.html">모델 설정</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#service-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="server" class="lucide lucide-layout align-middle">
                                <rect width="20" height="8" x="2" y="2" rx="2" ry="2"></rect>
                                <rect width="20" height="8" x="2" y="14" rx="2" ry="2"></rect>
                                <line x1="6" x2="6.01" y1="6" y2="6"></line>
                                <line x1="6" x2="6.01" y1="18" y2="18"></line>
                            </svg>
                            <span class="align-middle">서비스 관리</span>
                        </a>
                        <ul id="service-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="서비스관리_서비스설정.html">서비스 설정</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="서비스관리_서비스시나리오.html">서비스 시나리오</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#knowledge-group-manage" data-bs-toggle="collapse"
                            class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="copy" class="lucide lucide-layout align-middle">
                                <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
                                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>
                            </svg>
                            <span class="align-middle">지식 그룹 관리</span>
                        </a>
                        <ul id="knowledge-group-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="지식그룹관리_지식설정.html">지식 설정</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="지식그룹관리_프롬프트관리.html">프롬프트 관리</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#knowledge-date-manage" data-bs-toggle="collapse"
                            class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="database"
                                class="lucide lucide-layout align-middle">
                                <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                                <path d="M3 5V19A9 3 0 0 0 21 19V5"></path>
                                <path d="M3 12A9 3 0 0 0 21 12"></path>
                            </svg>
                            <span class="align-middle">지식데이터 관리</span>
                        </a>
                        <ul id="knowledge-date-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="지식데이터관리_지식파일관리.html">지식 파일 관리</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#dictionary-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="book-open"
                                class="lucide lucide-layout align-middle">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                            <span class="align-middle">사전 관리</span>
                        </a>
                        <ul id="dictionary-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="사전관리_신조어사전.html">신조어 사전</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="사전관리_동의어사전.html">동의어 사전</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="사전관리_불용어사전.html">불용어 사전</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="사전관리_금칙어사전.html">금칙어 사전</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#chat-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="message-circle"
                                class="lucide lucide-layout align-middle">
                                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path>
                            </svg>
                            <span class="align-middle">대화 관리</span>
                        </a>
                        <ul id="chat-manage" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="대화관리_미식별질의목록.html">미식별 질의 목록</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="대화관리_대화목록.html">대화 목록</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="대화관리_채팅로그.html">채팅로그</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#evaluation-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="zap" class="lucide lucide-layout align-middle">
                                <path
                                    d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z">
                                </path>
                            </svg>
                            <span class="align-middle">평가 관리</span>
                        </a>
                        <ul id="evaluation-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="평가관리_정답셋관리.html">정답셋 관리</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="평가관리_품질테스트.html">품질 테스트</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#log-analysis" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="activity"
                                class="lucide lucide-layout align-middle">
                                <path
                                    d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2">
                                </path>
                            </svg>
                            <span class="align-middle">로그 분석</span>
                        </a>
                        <ul id="log-analysis" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="로그분석_엔진로그.html">엔진 로그</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="로그분석_임베딩로그.html">임베딩 로그</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="로그분석_시스템로그.html">시스템 로그</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="로그분석_사용자로그.html">사용자 로그</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#usage-stats" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="pie-chart"
                                class="lucide lucide-layout align-middle">
                                <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
                                <path d="M22 12A10 10 0 0 0 12 2v10z"></path>
                            </svg>
                            <span class="align-middle">이용 통계</span>
                        </a>
                        <ul id="usage-stats" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="이용통계_사용자통계.html">사용자 통계</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="이용통계_대화통계.html">대화 통계</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a data-bs-target="#system-manage" data-bs-toggle="collapse" class="sidebar-link collapsed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" data-lucide="settings"
                                class="lucide lucide-layout align-middle">
                                <path
                                    d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                                </path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <span class="align-middle">시스템 관리</span>
                        </a>
                        <ul id="system-manage" class="sidebar-dropdown list-unstyled collapse"
                            data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="시스템관리_사용자관리.html">사용자 관리</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link" href="시스템관리_메뉴관리.html">메뉴 관리 </a>
                            </li>
                        </ul>
                    </li>

                </ul>
            </div>
        </nav>
        <div class="main">
            <nav class="navbar navbar-expand navbar-bg">
                <a class="sidebar-toggle">
                    <i class="hamburger align-self-center"></i>
                </a>
                <div class="navbar-right">
                    <div class="navbar-info">
                        <h4>Admin Name 1</h4>
                        <p>시스템 관리자</p>
                    </div>
                    <button type="button" class="btn btn-secondary">로그아웃</button>
                </div>
            </nav>

            <main class="content">
                <div class="container-fluid p-0">

                    <div class="row mb-2 mb-xl-3">
                        <div class="col-12 d-flex justify-content-between mb-3">
                            <h3>서비스 관리 > 서비스 시나리오</h3>
                        </div>

                        <div class="col-12">
                            <div class="tab">
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <a class="nav-link active" href="#service-scenario" data-bs-toggle="tab"
                                            role="tab" aria-selected="false" tabindex="0">시나리오</a>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <a class="nav-link" href="#service-simulation" data-bs-toggle="tab" role="tab"
                                            aria-selected="true">시뮬레이션</a>
                                    </li>
                                </ul>
                                <div class="tab-content p-0">
                                    <div class="tab-pane active show" id="service-scenario" role="tabpanel">
                                        <div class="card shadow-none">
                                            <div class="card-header">
                                                <h5 class="card-title">서비스 프로세스</h5>
                                            </div>
                                            <div class="card-body org-chart-group">
                                                <div class="accordion" id="scenario-block">
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header">
                                                            <button class="accordion-button" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#scenario-block-category"
                                                                aria-expanded="true"
                                                                aria-controls="scenario-block-category">
                                                                시나리오 블록
                                                            </button>
                                                        </h2>
                                                        <div id="scenario-block-category"
                                                            class="accordion-collapse collapse show"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body">
                                                                <div class="org-chart-block">
                                                                    <div class="draggable-node" draggable="true"
                                                                        data-name="category">
                                                                        카테고리
                                                                    </div>
                                                                    <div class="draggable-node" draggable="true"
                                                                        data-name="knowledge">
                                                                        지식</div>
                                                                    <div class="draggable-node" draggable="true"
                                                                        data-name="ioscript">
                                                                        IO-SCRIPT</div>
                                                                    <div class="draggable-node" draggable="true"
                                                                        data-name="modalQuestion">
                                                                        모델 질문 설정</div>
                                                                    <div class="draggable-node" draggable="true"
                                                                        data-name="modalSingle">
                                                                        모델 싱글턴 답변</div>
                                                                    <div class="draggable-node" draggable="true"
                                                                        data-name="modalMultiton">
                                                                        모델 멀티턴 답변</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="org-chart"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="service-simulation" role="tabpanel">
                                        <div class="card shadow-none">
                                            <div class="card-header">
                                                <h5 class="card-title">서비스 프로세스</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-8">
                                                        <div class="input-group mb-3">
                                                            <label class="form-label">서비스 선택</label>
                                                            <select class="form-select" name="service-simulation-select">
                                                                <option value="">서비스 명</option>
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col">
                                                        <a href="#" class="btn btn-outline-primary">새 창으로 열기</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </main>

            <!-- Start : Footer(common.js) -->
            <footer class=" footer" id="footer"></footer>
            <!-- End : Footer -->
        </div>
    </div>


    <!-- 카테고리 추가 -->
    <div class="modal fade" id="category-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>카테고리 추가</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-3">
                    <form action="">
                        <div class="row">
                            <div class="col-12">
                                <div class="input-group mb-3">
                                    <label class="form-label">카테고리 명칭<span>*</span></label>
                                    <input type="text" class="form-control" name="" placeholder="공백 포함 10자 제한" value=""
                                        maxlength="10">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="input-group mb-3">
                                    <label class="form-label">카테고리(홈) 아이콘</label>
                                    <input class="form-control" type="file">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="input-group mb-3">
                                    <label class="form-label">사용 여부</label>
                                    <label class="form-check me-4">
                                        <input name="category-situation" type="radio" class="form-check-input"
                                            value="on">
                                        <span class="form-check-label">On</span>
                                    </label>
                                    <label class="form-check">
                                        <input name="category-situation" type="radio" class="form-check-input"
                                            value="off">
                                        <span class="form-check-label">Off</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">확인</button>
                    <button type="button" class="btn btn-danger">삭제</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 지식 설정 -->
    <div class="modal fade" id="knowledge-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>지식 설정</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-3">
                    <form action="">
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">지식 선택<span>*</span></label>
                                    <select class="form-select" name="knowledge-select">
                                        <option value="">지식 선택</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">(홈)지식 설명<span>*</span></label>
                                    <textarea class="form-control"
                                        placeholder="챗봇 진입점(홈) 화면에 노출되는 지식에 대한 설명을 100자 이내로 입력해주세요." rows="2"
                                        maxlength="30"></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">지식 메시지<span>*</span></label>
                                    <textarea class="form-control"
                                        placeholder="선택한 지식으로 사용자가 대화를 하기 위한 첫 질문을 200자 이내로 입력해주세요." rows="4"
                                        maxlength="100"></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">힌트 질의</label>
                                    <div class="input-group-field">
                                        <div class="d-flex gap-1">
                                            <input type="text" class="form-control" name="" placeholder="공백 포함 200자 제한"
                                                value="" maxlength="200">
                                            <button type="button" class="btn-add-knowledge btn btn-outline-secondary">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    data-lucide="plus" class="lucide lucide-plus align-middle">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5v14"></path>
                                                </svg>
                                            </button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">확인</button>
                    <button type="button" class="btn btn-danger">삭제</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- IO-SCRIPT -->
    <div class="modal fade" id="io-script-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>IO-SCRIPT</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-3">
                    <form action="" method="post">
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">IO-SCRIPT 명칭<span>*</span></label>
                                    <input type="text" class="form-control" name="" placeholder="스크립트 명 20자 제한"
                                        maxlength="20" value="">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">IO-SCRIPT 설명</label>
                                    <textarea class="form-control" placeholder="스크립트 설명 200자 제한" rows="3"
                                        maxlength="200"></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">스크립트 작성<span>*</span></label>
                                    <textarea class="form-control" placeholder="" rows="6"></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">PARAMETER 설정<span>*</span></label>
                                    <div class="input-group-field">
                                        <div class="d-flex gap-1">
                                            <input type="text" class="form-control" name=""
                                                placeholder="PARAMETER명을 입력해주세요." value="">
                                            <input type="text" class="form-control" name="" placeholder="기본값을 입력해 주세요."
                                                value="">
                                            <button type="button" class="btn-add-io-script btn btn-outline-secondary">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    data-lucide="plus" class="lucide lucide-plus align-middle">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5v14"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">저장</button>
                    <button type="button" class="btn btn-danger">삭제</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 모델 질문 설정 -->
    <div class="modal fade" id="modal-question-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>모델 질문 설정</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-3">
                    <form action="">
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">블록 명칭<span>*</span></label>
                                    <input type="text" class="form-control" name=""
                                        placeholder="모델의 질문 설정이 직관적으로 드러낼 수 있는 명칭을 20자 이내로 입력해주세요." value=""
                                        maxlength="20">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">블록 설명</label>
                                    <textarea class="form-control" placeholder="모델의 질문 설정에 대하여 설명하는 글을 200자 이내로 입력해주세요."
                                        rows="3" maxlength="200"></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">질문 입력<span>*</span></label>
                                    <textarea class="form-control" placeholder="모델이 사용자에게 할 질문을 200자 이내로 질문해주세요."
                                        rows="3" maxlength="200"></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">PROMPT 작성<span>*</span></label>
                                    <textarea class="form-control" placeholder="모델이 사용자의 질문에 대한 답변을 받기 위한 설정 값을 입력해주세요."
                                        rows="3" maxlength="200"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">저장</button>
                    <button type="button" class="btn btn-danger">삭제</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 모델 싱글턴 답변 -->
    <div class="modal fade" id="modal-single-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>모델 싱글턴 답변</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-3">
                    <form action="">
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">블록 명칭<span>*</span></label>
                                    <input type="text" class="form-control" name=""
                                        placeholder="모델의 싱글턴 답변을 직관적으로 드러낼 수 있는 명칭을 20자 이내로 입력해주세요." maxlength="20"
                                        value="">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">싱글턴 메시지 입력</label>
                                    <textarea class="form-control"
                                        placeholder="모델이 답변을 출력할 때 사용자에게 안내할 메시지를 200자 이내로 입력해주세요." rows="3"
                                        maxlength="200"></textarea>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="mb-3">
                                    <label class="form-label">답변출처 사용</label>
                                    <label class="form-check me-4">
                                        <input name="single-radio-01" type="radio" class="form-check-input">
                                        <span class="form-check-label">On</span>
                                    </label>
                                    <label class="form-check">
                                        <input name="single-radio-01" type="radio" class="form-check-input">
                                        <span class="form-check-label">Off</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="mb-3">
                                    <label class="form-label">추가질문 사용</label>
                                    <label class="form-check me-4">
                                        <input name="single-radio-02" type="radio" class="form-check-input">
                                        <span class="form-check-label">On</span>
                                    </label>
                                    <label class="form-check">
                                        <input name="single-radio-02" type="radio" class="form-check-input">
                                        <span class="form-check-label">Off</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">점프 블록 선택<span>*</span></label>
                                    <select class="form-select" name="single-jump-select">
                                        <option value="">블록 선택</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">답변 링크 설정</label>
                                    <div class="input-group-field">
                                        <div class="d-flex gap-1">
                                            <input type="text" class="form-control" name="" placeholder="버튼명 입력"
                                                value="">
                                            <input type="text" class="form-control" name="" placeholder="링크 입력"
                                                value="">
                                            <button type="button" class="btn-add-single-link btn btn-outline-secondary">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    data-lucide="plus" class="lucide lucide-plus align-middle">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5v14"></path>
                                                </svg>
                                            </button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">저장</button>
                    <button type="button" class="btn btn-danger">삭제</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 모델 멀티턴 답변 -->
    <div class="modal fade" id="modal-multiton-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>모델 멀티턴 답변</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-3">
                    <form action="">
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">블록 명칭<span>*</span></label>
                                    <input type="text" class="form-control" name=""
                                        placeholder="모델 멀티턴 설정을 직관적으로 드러낼 수 있는 명칭을 20자 이내로 입력해주세요." value=""
                                        maxlength="10">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">멀티턴 메시지 입력<span>*</span></label>
                                    <textarea class="form-control"
                                        placeholder="모델이 멀티턴 답변을 출력할 때 사용자에게 안내할 메시지를 200자 이내로 입력해주세요." rows="5"
                                        maxlength="500"></textarea>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="mb-3">
                                    <label class="form-label">답변출처 사용</label>
                                    <label class="form-check me-4">
                                        <input name="multiton-radio-01" type="radio" class="form-check-input">
                                        <span class="form-check-label">On</span>
                                    </label>
                                    <label class="form-check">
                                        <input name="multiton-radio-01" type="radio" class="form-check-input">
                                        <span class="form-check-label">Off</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="mb-3">
                                    <label class="form-label">추가질문 사용</label>
                                    <label class="form-check me-4">
                                        <input name="multiton-radio-02" type="radio" class="form-check-input">
                                        <span class="form-check-label">On</span>
                                    </label>
                                    <label class="form-check">
                                        <input name="multiton-radio-02" type="radio" class="form-check-input">
                                        <span class="form-check-label">Off</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">답변 링크 설정</label>
                                    <div class="input-group-field">
                                        <div class="d-flex gap-1">
                                            <input type="text" class="form-control" name="" placeholder="버튼명 입력"
                                                value="">
                                            <input type="text" class="form-control" name="" placeholder="링크 입력"
                                                value="">
                                            <button type="button"
                                                class="btn-add-multiton-link btn btn-outline-secondary">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    data-lucide="plus" class="lucide lucide-plus align-middle">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5v14"></path>
                                                </svg>
                                            </button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">저장</button>
                    <button type="button" class="btn btn-danger">삭제</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/common.js"></script>
    <script src="js/orgchart.js"></script>
    <script>
        // -------------------------
        // 템플릿 생성 함수
        // -------------------------
        function createTemplate(name, fillColor, strokeColor, textColor = "#000") {
            OrgChart.templates[name] = Object.assign({}, OrgChart.templates.ana);
            OrgChart.templates[name].size = [120, 60]

            OrgChart.templates[name].node = `
                <rect x="0" y="0" rx="8" ry="8" height="60" width="120" fill="${fillColor}" stroke="${strokeColor}" stroke-width="1"></rect>
            `;

            OrgChart.templates[name].field_0 = `
                <text data-width="120" data-height="60" x="60" y="30" text-anchor="middle" alignment-baseline="middle"
                style="font-size:14px;font-weight:500; fill:${textColor};">{val}</text>
            `;
        }


        // -------------------------
        // 템플릿 등록 (색상 순차 적용)
        // -------------------------
        createTemplate("templateStyleOne", "#3f80ea", "#295ec2", "#fff"); // primary
        createTemplate("templateStyleTwo", "#295ec2", "#295ec2", "#fff"); // primary-subtle
        createTemplate("templateStyleThree", "#495057", "#2c3035", "#fff"); // secondary
        createTemplate("templateStyleFour", "#4bbf73", "#369b58", "#fff"); // success
        createTemplate("templateStyleFive", "#1f9bcf", "#126c99", "#fff"); // info
        createTemplate("templateStyleSix", "#e5a54b", "#bb7d28", "#000"); // warning
        createTemplate("templateStyleSeven", "#d9534f", "#aa2e2a", "#fff"); // danger
        createTemplate("templateStyleEight", "#eff2f6", "#cdd1d6", "#000"); // light

        let nextId = 3;
        let selectedNodeId = null;

        // -------------------------
        // OrgChart 생성
        // -------------------------
        window.chart = new OrgChart("#org-chart", {
            enableDragDrop: true,
            enableSearch: false,
            enableCollapse: true,
            nodeMouseClick: OrgChart.action.none,
            editForm: {
                enabled: false
            },
            menuButton: false,
            nodeBinding: {
                field_0: "name"
            },
            tags: {
                service: { template: "templateStyleOne" },
                category: { template: "templateStyleTwo" },
                knowledge: { template: "templateStyleThree" },
                ioscript: { template: "templateStyleFour" },
                modalQuestion: { template: "templateStyleFive" },
                modalSingle: { template: "templateStyleSix" },
                modalMultiton: { template: "templateStyleSeven" }
            },
            nodes: [
                { id: 1, name: "서비스", tags: ["service"] },
                { id: 2, pid: 1, name: "카테고리", tags: ["category"] }
            ]
        });

        // -------------------------
        // 노드 클릭 시 선택된 ID 저장
        // -------------------------
        chart.on('click', function (sender, args) {
            selectedNodeId = args.node.id;
        });

        // -------------------------
        // 드래그 이벤트
        // -------------------------
        $(".draggable-node").on("dragstart", function (e) {
            e.originalEvent.dataTransfer.setData("name", $(this).data("name"));
        });

        $("#org-chart").on("dragover", function (e) {
            e.preventDefault();
        });

        $("#org-chart").on("drop", function (e) {
            e.preventDefault();

            const droppedName = e.originalEvent.dataTransfer.getData("name");
            if (!selectedNodeId) {
                alert("먼저 노드를 선택하세요.");
                return;
            }

            const selectedNode = chart.getNode(selectedNodeId);

            const tagMap = {
                category: "category",
                knowledge: "knowledge",
                ioscript: "ioscript",
                modalQuestion: "modalQuestion",
                modalSingle: "modalSingle",
                modalMultiton: "modalMultiton",
            };

            const tag = tagMap[droppedName];
            const newNode = {
                id: Date.now(),
                name: droppedName,
                tags: [tag]
            };

            if (droppedName === "category") {
                newNode.pid = 1;
            } else if (droppedName === "knowledge") {
                if (!selectedNode.tags?.includes("category")) {
                    alert("지식은 카테고리 노드에만 추가할 수 있어요.");
                    return;
                }
                newNode.pid = selectedNode.id;
            } else {
                if (selectedNode.tags?.includes("category") || selectedNode.tags?.includes("knowledge")) {
                    newNode.pid = selectedNode.id;
                } else {
                    alert("이 요소는 카테고리 또는 지식 노드에만 추가할 수 있어요.");
                    return;
                }
            }

            chart.addNode(newNode);
        });

        // -------------------------
        // 노드 클릭 시 모달 오픈
        // -------------------------
        chart.on("click", function (sender, args) {
            const node = args.node;

            const modalMap = {
                category: "category-modal",
                knowledge: "knowledge-modal",
                ioscript: "io-script-modal",
                modalQuestion: "modal-question-modal",
                modalSingle: "modal-single-modal",
                modalMultiton: "modal-multiton-modal"
            };

            for (const tag in modalMap) {
                if (node.tags?.includes(tag)) {
                    showModal(modalMap[tag]);
                    break;
                }
            }

            function showModal(id) {
                const modal = new bootstrap.Modal(document.getElementById(id));
                modal.show();
            }
        });

    </script>
</body>

</html>